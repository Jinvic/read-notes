# .github/workflows/deploy.yml
name: Deploy Site

on:
  workflow_dispatch:
  # å½“docsç›®å½•æˆ–mkdocsé…ç½®æœ‰å˜æ›´æ—¶è‡ªåŠ¨è§¦å‘
  push:
    paths:
      - 'docs/**'
      - 'mkdocs.yml'
      - '.github/workflows/deploy.yml'

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        
      - name: è®¾ç½®Pythonç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          
      - name: å®‰è£…MkDocså’Œä¸»é¢˜
        run: |
          pip install mkdocs
          pip install mkdocs-material  # å¦‚æœä½¿ç”¨materialä¸»é¢˜
          
      - name: æ„å»ºç«™ç‚¹
        run: |
          echo "ğŸ—ï¸  å¼€å§‹æ„å»ºMkDocsç«™ç‚¹..."
          mkdocs build --verbose
          echo "âœ… æ„å»ºå®Œæˆ"
          
      - name: éƒ¨ç½²åˆ°GitHub Pages
        if: success()
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./site
          publish_branch: gh-pages
          force_orphan: true